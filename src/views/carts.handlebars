<div class="cart__container">
  <h1 class="cart__title">Detalles del Carrito</h1>

  <p class="cart__id"><strong>ID del Carrito:</strong> {{cartId}}</p>

  <h2 class="cart__subtitle">Productos en el Carrito:</h2>
  <table class="cart__table">
    <thead class="cart__table__thead">
      <tr>
        <th>Producto</th>
        <th>Precio</th>
        <th>Categoría</th>
        <th>Cantidad</th>
        <th>Stock</th>
        <th>Acción</th>
      </tr>
    </thead>
    <tbody class="cart__table__tbody">
      {{#each products}}
      <tr>
        <td class="cart__table__product">
          <span>{{this.product.title}}</span>
          <img src="{{this.product.img}}" alt="Imagen del producto" class="cart__image">
        </td>
        <td>${{this.totalPricePerProduct}}</td>
        <td>{{this.product.category}}</td>
        <td>{{this.quantity}}</td>
        <td>{{this.product.stock}}</td>
        <td>
          <button onclick="eliminarProducto('{{../cartId}}', '{{this.product._id}}')" class="cart__btn--delete">
            Eliminar
          </button>
        </td>
      </tr>
      {{/each}}
    </tbody>
  </table>

  <div class="cart__summary">
    <h3 class="cart__total">Total: ${{purchaseTotal}}</h3>
  </div>

  <div class="cart__actions">
    <a href="/products" class="cart__link">
      <i class="fa-solid fa-arrow-left"></i> Seguir comprando
    </a>
    <form method="post" action="/api/carts/{{cartId}}/purchase">
      <button type="submit" class="cart__btn--purchase">Finalizar Compra</button>
    </form>
  </div>
</div>

<script src="../js/cartFunctions.mjs"></script>
